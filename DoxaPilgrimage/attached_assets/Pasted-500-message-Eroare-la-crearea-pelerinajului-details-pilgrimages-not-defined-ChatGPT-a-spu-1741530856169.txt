500: {"message":"Eroare la crearea pelerinajului","details","pilgrimages not defined"}
ChatGPT a spus:
Eroarea indicÄƒ o problemÄƒ la inserarea datelor Ã®n baza de date. Hai sÄƒ verificÄƒm È™i sÄƒ rezolvÄƒm:

ğŸ”¹ PaÈ™i pentru depanare:
VerificÄƒ dacÄƒ baza de date existÄƒ

Ãn directorul proiectului, ar trebui sÄƒ ai fiÈ™ierul pelerinaje.db. DacÄƒ nu existÄƒ, È™terge È™i ruleazÄƒ din nou aplicaÈ›ia pentru a-l reiniÈ›ializa.
VerificÄƒ schema bazei de date

Deschide terminalul È™i ruleazÄƒ:
bash
CopiazÄƒ
EditeazÄƒ
sqlite3 pelerinaje.db
Apoi executÄƒ:
sql
CopiazÄƒ
EditeazÄƒ
.schema pelerinaje
Trebuie sÄƒ vezi structura corectÄƒ a tabelului:
sql
CopiazÄƒ
EditeazÄƒ
CREATE TABLE pelerinaje (id INTEGER PRIMARY KEY AUTOINCREMENT, titlu TEXT, data TEXT, pret REAL, descriere TEXT, status TEXT);
VerificÄƒ dacÄƒ formularul trimite toate datele corect

AdaugÄƒ acest print() Ã®n funcÈ›ia adauga_pelerinaj pentru a vedea exact ce date sunt transmise:
python
CopiazÄƒ
EditeazÄƒ
@app.route('/adauga', methods=['POST'])
def adauga_pelerinaj():
    titlu = request.form.get('titlu')
    data = request.form.get('data')
    pret = request.form.get('pret')
    descriere = request.form.get('descriere')
    status = request.form.get('status')

    print(f"Titlu: {titlu}, Data: {data}, Pret: {pret}, Descriere: {descriere}, Status: {status}")  # Debugging

    if not all([titlu, data, pret, descriere, status]):
        return {"message": "Eroare la crearea pelerinajului", "details": "Lipsesc date din formular"}, 400

    try:
        with sqlite3.connect(\"pelerinaje.db\") as conn:
            cursor = conn.cursor()
            cursor.execute(\"INSERT INTO pelerinaje (titlu, data, pret, descriere, status) VALUES (?, ?, ?, ?, ?)\", 
                           (titlu, data, float(pret), descriere, status))
            conn.commit()
    except Exception as e:
        return {"message": "Eroare la crearea pelerinajului", "details": str(e)}, 500

    return redirect('/organizer/dashboard')
Restart Flask È™i verificÄƒ log-urile

RuleazÄƒ din nou aplicaÈ›ia È™i verificÄƒ ce apare Ã®n consolÄƒ dupÄƒ completarea formularului.
ğŸ“Œ DacÄƒ problema persistÄƒ, spune-mi exact ce eroare apare Ã®n terminal!